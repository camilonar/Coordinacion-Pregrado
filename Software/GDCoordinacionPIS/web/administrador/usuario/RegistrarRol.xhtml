<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">



    <ui:composition>            
        <p:dialog id="UsuarioRolDlg" widgetVar="UsuarioRolDialog" modal="true" resizable="false" 
                  appendTo="@(body)" header="Habilitar rol" closable="false">
            <br/>
            <h:form id="UsuarioRolForm">
                <p:panelGrid  styleClass="panelgrid"  id="panel2">
                    <p:row>
                        <p:column>
                            <p:outputLabel style="font-weight:bold;" value="Tipo de usuario:" />
                        </p:column>
                        <p:column>
                            <p:selectOneMenu style="width: 155px;" id="grupoId" value="#{usuarioController.grupo}" >
                                <p:ajax event="change" update="grupoId" listener="#{usuarioController.setTipoUsuarioEditarRol()}"/>
                                <f:selectItems value="#{grupoController.itemsAvailableSelectOne}"
                                               var="grupo"
                                               itemValue="#{grupo}"
                                               itemLabel="#{grupo.grudescripcion}"
                                               />
                            </p:selectOneMenu>
                        </p:column>
                        <p:column rendered="#{usuarioController.tipo == usuarioController.tipoJefe}">
                            <p:outputLabel style="font-weight:bold;" value="Departamento: " />
                        </p:column>
                        <p:column rendered="#{usuarioController.tipo == usuarioController.tipoJefe}" >
                            <p:selectOneMenu id="departamentoId" value="#{usuarioController.dpto}" 
                                             filter="true" style="width: 155px;">
                                <p:ajax event="change" update="departamentoId"/> 
                                <f:selectItems value="#{departamentoController.itemsAvailableSelectOne}"
                                               var="dpto"
                                               itemValue="#{dpto}"
                                               itemLabel="#{dpto.nombre}"
                                               >

                                </f:selectItems>
                            </p:selectOneMenu>
                        </p:column>
                        <p:column rendered="#{usuarioController.tipo == usuarioController.tipoCoordinador}">
                            <p:outputLabel style="font-weight:bold;" value="Programa: " />
                        </p:column>
                        <p:column rendered="#{usuarioController.tipo == usuarioController.tipoCoordinador}" >
                            <p:selectOneMenu id="programaId" value="#{usuarioController.programa.idPrograma}" 
                                             filter="true" style="width: 155px;">
                                <p:ajax event="change" update="programaId"/> 
                                <f:selectItems value="#{programaController.items}"
                                               var="programa"
                                               itemValue="#{programa.idPrograma}"
                                               itemLabel="#{programa.nombrePrograma}"
                                               >

                                </f:selectItems>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    <p:row> 
                        <p:column>

                        </p:column>
                        <p:column style = "width: 100px">
                            <p:message  for="grupoId"/>
                        </p:column>

                    </p:row>
                </p:panelGrid>
                <p:separator/>
                <center>

                    <p:button value="Cancelar"
                              onclick ="PF('UsuarioRolDialog').hide();
                                      $('#UsuarioRolForm').trigger('reset');"                                   
                              style="margin: 20px;"/>

                    <p:commandButton 
                        action="#{usuarioController.editarUsuarioRol()}" value="Actualizar" 
                        update=":UsuarioListForm:datalist"
                        />
                </center>

            </h:form>

        </p:dialog>
    </ui:composition>

</html>